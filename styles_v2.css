:root {
    /* 淺色主題變數 */
    --bg-gradient: linear-gradient(135deg, #e0e7ff 0%, #f3f4f6 100%);
    --text-primary: #1a1a1a;
    --text-secondary: #666666;
    
    --glass-bg: rgba(255, 255, 255, 0.65);
    --glass-border: rgba(255, 255, 255, 0.8);
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
    
    --card-border-glow: rgba(74, 144, 226, 0.3);
}

:root.dark {
    /* 深色主題變數 */
    --bg-gradient: linear-gradient(135deg, #0f172a 0%, #020617 100%);
    --text-primary: #ffffff;
    --text-secondary: #94a3b8;
    
    --glass-bg: rgba(15, 23, 42, 0.6);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
    
    --card-border-glow: rgba(74, 144, 226, 0.5);
}

::view-transition-new(root), ::view-transition-old(root) { animation: none; }

/* 基礎設定 & 禁止選取 */
* { 
    margin: 0; 
    padding: 0; 
    box-sizing: border-box; 
    -webkit-font-smoothing: antialiased; 
    
    /* 全域禁止選取文字 */
    user-select: none; 
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

img, button, a { -webkit-user-drag: none; }

body {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-gradient);
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    position: relative;
    overflow: hidden;
    padding: 20px;
}

/* --- 背景特效 --- */
.theme-toggle {
    position: fixed; top: 20px; right: 20px; width: 40px; height: 40px; border-radius: 50%;
    border: 1px solid var(--glass-border); background: var(--glass-bg); backdrop-filter: blur(10px);
    color: var(--text-primary); cursor: pointer; z-index: 1000; display: flex; align-items: center; justify-content: center;
    font-size: 1.2rem; transition: all 0.3s ease; box-shadow: var(--glass-shadow);
}
.theme-toggle:hover { transform: scale(1.1) rotate(15deg); }

body::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 20% 20%, rgba(62, 84, 172, 0.15) 0%, transparent 40%), radial-gradient(circle at 80% 80%, rgba(94, 58, 152, 0.15) 0%, transparent 40%); z-index: 0; }

@keyframes moveParticles { 0% { transform: translate(0, 0) rotate(0deg); opacity: 0.3; } 50% { opacity: 1; } 100% { transform: translate(100px, 100px) rotate(360deg); opacity: 0.3; } }
.particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
.particle { position: absolute; width: 3px; height: 3px; background: var(--text-secondary); border-radius: 50%; animation: moveParticles 15s infinite linear; }
.particle:nth-child(1) { top: 10%; left: 20%; animation-delay: 0s; } .particle:nth-child(2) { top: 20%; left: 60%; animation-delay: -2s; } .particle:nth-child(3) { top: 40%; left: 40%; animation-delay: -4s; } .particle:nth-child(4) { top: 60%; left: 80%; animation-delay: -6s; } .particle:nth-child(5) { top: 80%; left: 30%; animation-delay: -8s; } .particle:nth-child(6) { top: 90%; left: 70%; animation-delay: -10s; }

.glow { position: absolute; width: 400px; height: 400px; border-radius: 50%; background: radial-gradient(circle, rgba(74, 144, 226, 0.15) 0%, rgba(94, 58, 152, 0.05) 50%, transparent 70%); filter: blur(30px); animation: glowPulse 8s infinite ease-in-out; }
@keyframes glowPulse { 0% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.2); opacity: 0.3; } 100% { transform: scale(1); opacity: 0.5; } }
.glow-1 { top: -150px; left: -150px; } .glow-2 { bottom: -150px; right: -150px; animation-delay: -4s; }

.floating-light { position: absolute; width: 200px; height: 200px; background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, transparent 70%); border-radius: 50%; animation: float 8s ease-in-out infinite; }
@keyframes float { 0% { transform: translateY(0px) translateX(0px); } 50% { transform: translateY(-15px) translateX(5px); } 100% { transform: translateY(0px) translateX(0px); } }
.light-1 { top: 10%; left: 10%; } .light-2 { bottom: 20%; right: 15%; animation-delay: -2s; } .light-3 { top: 50%; left: 50%; animation-delay: -4s; }

/* --- 卡片主體 --- */
.profile-card {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 2.5rem;
    width: 100%;
    max-width: 750px;
    padding: 3rem;
    background: var(--glass-bg);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-radius: 24px;
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow), inset 0 0 0 1px rgba(255, 255, 255, 0.1);
    position: relative;
    z-index: 10;
    transition: all 0.3s ease;
    animation: simpleFadeIn 1s ease forwards;
}

.profile-card::after {
    content: ''; position: absolute; inset: -1px; border-radius: 24px; padding: 1px;
    background: linear-gradient(45deg, transparent, var(--card-border-glow), transparent);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude; pointer-events: none; opacity: 0.5;
}

/* --- 左側：身份區 --- */
.profile-identity {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 0 1rem; /* 修正置中問題 */
    border-right: 1px solid var(--glass-border);
}

.profile-image-container {
    position: relative; width: 150px; height: 150px; margin-bottom: 1.5rem;
    opacity: 0;
    animation: fadeInSlideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.2s;
}

.profile-image {
    width: 100%; height: 100%; border-radius: 50%; overflow: hidden;
    border: 4px solid rgba(255, 255, 255, 0.1); position: relative; z-index: 2;
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.profile-image img { width: 100%; height: 100%; object-fit: cover; }
.image-glow {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 100%; height: 100%; border-radius: 50%;
    background: radial-gradient(circle, var(--card-border-glow) 0%, transparent 70%);
    opacity: 0.5; filter: blur(15px); z-index: 1; animation: pulseGlow 3s infinite ease-in-out;
}
.profile-card:hover .profile-image { transform: scale(1.05) rotate(5deg); }

.username {
    font-size: 2rem;
    font-weight: 800;
    letter-spacing: -0.5px;
    margin-bottom: 0.5rem;
    color: var(--text-primary);
    background-image: linear-gradient(135deg, var(--text-primary) 30%, var(--text-secondary) 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    opacity: 0;
    animation: fadeInSlideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.4s;
}

.user-divider {
    width: 40px; height: 3px; background: var(--card-border-glow);
    margin: 0.8rem auto; border-radius: 10px;
    opacity: 0;
    animation: fadeInSlideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.5s;
}

.user-location {
    display: flex;
    align-items: center;
    justify-content: center; /* 修正置中問題 */
    gap: 0.5rem;
    color: var(--text-secondary);
    font-size: 0.95rem; font-weight: 500;
    opacity: 0;
    animation: fadeInSlideDown 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.6s;
}

/* --- 右側：連結區 --- */
.profile-actions { display: flex; flex-direction: column; justify-content: center; }
.links-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1.5rem; }

.modern-button {
    position: relative; display: flex; align-items: center; justify-content: center; gap: 0.8rem;
    padding: 1rem 1.5rem; border-radius: 14px; text-decoration: none; font-weight: 600; font-size: 1rem;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    color: var(--text-primary); background: rgba(255, 255, 255, 0.03); border: 1px solid var(--glass-border); overflow: hidden;
}
.dark .modern-button { background: rgba(0, 0, 0, 0.2); }
.modern-button i { font-size: 1.4rem; transition: transform 0.3s ease; color: var(--btn-theme, var(--text-primary)); }
.modern-button:hover {
    background: var(--btn-theme); border-color: var(--btn-theme); color: white;
    transform: translateY(-3px); box-shadow: 0 10px 20px -10px var(--btn-theme), 0 0 15px -5px var(--btn-theme) inset;
}
.modern-button:hover i { color: white; transform: scale(1.1) rotate(-5deg); }

/* --- 修正 Steam 圖標顏色 --- */
/* 淺色模式：保持原本的黑色 */
:root:not(.dark) .steam i { color: #171a21; } 
:root:not(.dark) .steam:hover { color: white; }

/* 深色模式：強制改成白色，不然會看不到 */
.dark .steam i { color: #ffffff !important; }


.other-section { position: relative; }
.other-trigger { width: 100%; background: rgba(120, 120, 120, 0.1) !important; border: 1px dashed var(--glass-border) !important; color: var(--text-secondary) !important; }
.other-trigger i { color: var(--text-secondary) !important; }
.other-trigger:hover { background: var(--glass-bg) !important; border-style: solid !important; color: var(--text-primary) !important; transform: translateY(-2px); }
.other-trigger:hover i { color: var(--text-primary) !important; transform: rotate(180deg); }

.preview-window {
    position: absolute; top: calc(100% + 10px); left: 0; width: 100%;
    background: var(--glass-bg); backdrop-filter: blur(25px) saturate(180%); -webkit-backdrop-filter: blur(25px) saturate(180%);
    border: 1px solid var(--glass-border); border-radius: 14px; padding: 0.8rem;
    opacity: 0; visibility: hidden; transform: translateY(-10px) scale(0.98);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); z-index: 20; box-shadow: var(--glass-shadow);
    display: flex; flex-direction: column; gap: 0.5rem;
}
.other-section:hover .preview-window, .other-section:focus-within .preview-window { opacity: 1; visibility: visible; transform: translateY(0) scale(1); }
.preview-link { display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem 1rem; color: var(--text-primary); text-decoration: none; border-radius: 8px; transition: all 0.2s ease; font-weight: 500; }
.dark .preview-link { color: var(--text-secondary); }
.preview-link:hover { background: rgba(255, 255, 255, 0.1); color: var(--text-primary); transform: translateX(5px); }
.preview-link i { font-size: 1.1rem; width: 20px; text-align: center;}
.preview-link:nth-child(2) i { color: #9146FF; } .preview-link:nth-child(3) i { color: #FF0000; }

/* --- 動畫定義 --- */
@keyframes fadeInSlideDown {
    from { opacity: 0; transform: translateY(-50px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes simpleFadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes pulseGlow { 0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; } 50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.3; } }

/* --- 響應式設計 (Mobile) --- */
@media (max-width: 768px) {
    .profile-card { grid-template-columns: 1fr; gap: 2rem; padding: 2rem 1.5rem; width: 90%; }
    .profile-identity { padding-right: 0; border-right: none; border-bottom: 1px solid var(--glass-border); padding-bottom: 2rem; }
    .profile-image-container { width: 120px; height: 120px; }
    .username { font-size: 1.75rem; }
    .links-grid { grid-template-columns: 1fr; }
    .modern-button { padding: 0.9rem; justify-content: flex-start; }
    .modern-button span { flex-grow: 1; text-align: center; transform: translateX(-15px); }
}
